import{r as a,j as e}from"./index-DicgO7U8.js";import{S as p}from"./SideBar-BpVyDR37.js";import{a as o,A as l}from"./Api-Bc_X5g2J.js";import"./logo-DXaR5l7O.js";import"./iconBase-BuQJHyx1.js";import"./index-BXdv_VhJ.js";function y(){const[c,i]=a.useState([]),[s,n]=a.useState(null);a.useEffect(()=>{(async()=>{try{const r=await o.get(l.GET.PICTURELIST);i(r.data.data.reverse())}catch(r){console.error("Error fetching images:",r)}})()},[]);const d=t=>{const r=t.target.files[0];if(r){if(r.size>5*1024*1024){alert("حجم الصورة كبير جدًا! يُرجى تحميل صورة أصغر من 5 ميجابايت.");return}n(r)}},m=async()=>{if(!s){alert("الرجاء اختيار الصورة أولا!");return}const t=new FormData;t.append("picture_title","Portfolio Picture"),t.append("image",s);try{const r=await o.post(l.POST.CREATEPICTURE,t,{headers:{"Content-Type":"multipart/form-data"}});alert("تم التحميل بنجاح"),window.location.reload()}catch{alert("فشل تحميل الصورة"),console.error("Error uploading image:",error.response?error.response.data:error.message)}},x=async t=>{if(window.confirm("هل أنت متأكد أنك تريد حذف هذه الصورة؟"))try{const f=await o.delete(l.DELETE(t).DELETEPICTURE);alert("لقد تم حذف الصورة"),window.location.reload()}catch{}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"md:flex gap-14",children:[e.jsx(p,{}),e.jsxs("div",{className:"font-source mx-3",children:[e.jsx("p",{className:"font-bold text-3xl text-[#1A78F2]  mt-12 ",children:"لوحة التحكم"}),e.jsx("p",{className:"font-bold text-2xl text-[#1A78F2]  my-12",children:"معرض الصور"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl text-gray-500 mb-3",children:"أضف الصورة هنا"}),e.jsxs("label",{className:"cursor-pointer border-dashed border-2 rounded-lg max-w-[300px] border-gray-400 p-16 w-full flex items-center justify-center",children:[s?e.jsx("a",{href:"#",className:"block",children:e.jsx("img",{src:URL.createObjectURL(s),alt:"photo-portfolio",className:"w-full h-full object-cover"})}):e.jsx("span",{className:"text-gray-500 text-xl ",children:"أرفع الصورة"}),e.jsx("input",{type:"file",className:"hidden",onChange:t=>d(t)})]})]}),e.jsx("button",{onClick:m,className:"px-8 py-4 text-2xl font-medium  bg-[#1A78F2] text-white rounded-lg  hover:bg-[#EAEEF3] hover:text-[#1A78F2] mt-6",children:"رفع الصورة"}),e.jsx("hr",{className:"mt-7 text-gray-400"}),e.jsx("div",{className:"flex flex-col justify-center items-center mt-10",children:e.jsx("div",{className:"grid grid-cols-1 gap-7 mb-9 xl:grid-cols-3 sm:grid-cols-2",children:c.map((t,r)=>e.jsxs("div",{className:"mb-3",children:[e.jsx("img",{src:t.image,className:"w-full h-[250px] rounded-xl object-cover",alt:"photo-portfolio"}),e.jsx("button",{onClick:()=>x(t.id),className:"px-4 py-2 bg-[#1A78F2] font-medium text-2xl text-white rounded-lg hover:bg-[#EAEEF3] hover:text-[#1A78F2] mt-6 font-source",children:"حذف الصورة"})]},r))})})]})]})})}export{y as default};
