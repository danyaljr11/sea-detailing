import{r as l,j as e,R as N}from"./index-DicgO7U8.js";import{b as w}from"./index-BXdv_VhJ.js";import{f as y}from"./index-BhZFH1Nb.js";import{S as E}from"./SideBar-BpVyDR37.js";import{a as o,A as d}from"./Api-Bc_X5g2J.js";import"./iconBase-BuQJHyx1.js";import"./logo-DXaR5l7O.js";function M(){const[D,v]=l.useState(null),[p,F]=l.useState(null),[n,h]=l.useState(1),[i,u]=l.useState([]),[S,A]=l.useState(!0),c=6;l.useEffect(()=>{(async()=>{try{const t=await o.get(d.GET.ORDERLIST);console.log(t.data.data.reverse());const a=t.data.data.reverse();u(t.data.data.reverse())}catch{}})()},[]);const f=async(s,t)=>{try{const a=t==="new"?"finished":"new",O=await o.put(d.PUT(s).UPDATEORDER,{status:a},{headers:{"Content-Type":"application/json"}});window.location.reload()}catch(a){console.log(a)}},b=async s=>{if(window.confirm("هل أنت متأكد أنك تريد حذف هذا الطلب؟"))try{const a=await o.delete(d.DELETE(s).DELETEORDER);alert("لقد تم حذف الطلب"),window.location.reload()}catch(a){console.log(a)}},x=n*c,g=x-c,j=i.slice(g,x),m=Math.ceil(i.length/c),r=s=>{h(s)};return e.jsxs("div",{className:"md:flex h-screen gap-14",children:[e.jsx(E,{}),e.jsxs("div",{className:"p-6 sm:p-10 flex-1 space-y-10",children:[e.jsx("p",{className:"font-bold text-3xl text-[#1A78F2] font-source",children:"لوحة التحكم"}),e.jsx("p",{className:"font-bold text-2xl text-[#1A78F2] font-source",children:"الطلبات"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full shadow-md rounded-lg overflow-hidden",children:[e.jsx("thead",{className:"hidden lg:table-header-group",children:e.jsxs("tr",{className:"bg-gray-200 text-gray-700 text-left font-source",children:[e.jsx("th",{className:"py-5  px-6",children:"اسم الزبون"}),e.jsx("th",{className:"py-5  px-6",children:"عنوان البريد الإلكتروني"}),e.jsx("th",{className:"py-5 px-6",children:"رقم الهاتف"}),e.jsx("th",{className:"py-5 px-6",children:"وصف الطلب"}),e.jsx("th",{className:"py-5  px-6",children:"المكان"}),e.jsx("th",{className:"py-5  px-6",children:"العنوان"}),e.jsxs("th",{className:"py-5 px-6 text-left  flex items-center gap-2",children:["حالة الطلب ",e.jsx(y,{className:"text-base"})]}),e.jsx("th",{className:"py-5 px-6"})]})}),e.jsx("tbody",{className:"block lg:table-row-group ",children:j.map(s=>e.jsx(N.Fragment,{children:e.jsxs("tr",{className:"block md:table-row border-b bg-white shadow-md md:shadow-none md:bg-transparent mb-4 md:mb-0",children:[e.jsxs("td",{className:"p-6 font-bold flex md:table-cell","data-label":"Name",children:[s.name,p&&e.jsx("span",{className:"ml-2 inline-block w-3 h-3 bg-green-500 rounded-full"})]}),e.jsx("td",{className:"p-6 font-source flex md:table-cell","data-label":"Email",children:s.email}),e.jsx("td",{className:"p-6 font-source flex md:table-cell","data-label":"Phone",children:s.phone}),e.jsx("td",{className:"p-6 font-source cursor-pointer flex md:table-cell ","data-label":"Description",children:s.message}),e.jsx("td",{className:"p-6 cursor-pointer  truncate flex lg:table-cell","data-label":"Location",children:s.type}),e.jsx("td",{className:"p-6 cursor-pointer  truncate flex lg:table-cell","data-label":"Location",children:s.address}),e.jsx("td",{className:"p-6 cursor-pointer flex lg:table-cell","data-label":"Status",onClick:()=>f(s.id,s.status),children:e.jsx("div",{className:"flex items-center space-x-2",children:s.status==="new"?e.jsxs("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-700 rounded-full mr-2"}),"جديد"]}):e.jsxs("span",{className:"bg-[#FFEDDB] text-[#FF850B] px-3 py-1 rounded-full flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-[#FF850B] rounded-full mr-2"}),"مكتمل"]})})}),e.jsx("td",{className:"p-3 py-6 flex space-x-4 lg:table-cell","data-label":"Actions",children:e.jsx(w,{onClick:()=>b(s.id),className:"text-gray-500 text-2xl cursor-pointer"})})]},s.id)},s.id))})]})}),e.jsxs("div",{className:"flex justify-between font-source mt-4",children:[e.jsx("button",{onClick:()=>r(Math.max(n-1,1)),className:"px-4 py-2 bg-[#1A78F2] text-white rounded hover:bg-blue-700",children:"السابق"}),e.jsx("div",{className:"flex gap-5 ",children:Array.from({length:m},(s,t)=>e.jsx("button",{className:`px-3 py-2 rounded ${n===t+1?"bg-[#1A78F2] text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,onClick:()=>r(t+1),children:t+1},t+1))}),e.jsx("button",{className:"px-4 py-2 bg-[#1A78F2] hover:bg-blue-700 text-white rounded",onClick:()=>r(Math.min(n+1,m)),children:"التالي"})]})]})]})}export{M as default};
